#!/usr/bin/env python3

# Imports
from primes.generate_primes import primes_up_to_100m

# Functions

# Main logic
primes = primes_up_to_100m()
mx = primes[-1]
pss = list(str(p) for p in primes if p not in [2,5])
psset = set(pss)
ps = set()
for i1, p1 in enumerate(pss):
    for i2, p2 in enumerate(pss[i1+1:]):
        if int(p1+p2) >= mx:
            break
        if all(pp in psset for pp in [p1+p2, p2+p1]):
            for i3, p3 in enumerate(pss[i1+i2+1:]):
                if int(p2+p3) >= mx:
                    break
                if all(pp in psset for pp in [p1+p3, p2+p3, p3+p1, p3+p2]):
                    for i4, p4 in enumerate(pss[i1+i2+i3+1:]):
                        if int(p3+p4) >= mx:
                            break
                        if all(pp in psset for pp in [p1+p4,p2+p4,p3+p4,p4+p1,p4+p2,p4+p3]):
                            print(f"{p1} + {p2} + {p3} + {p4} = {sum(int(p) for p in [p1, p2, p3, p4])}")
                            for i5, p5 in enumerate(pss[i1+i2+i3+i4+1:]):
                                if int(p4+p5) >= mx:
                                    break
                                if all(pp in psset for pp in [p1+p5,p2+p5,p3+p5,p4+p5,p5+p1,p5+p2,p5+p3,p5+p4]):
                                    print(f"{p1} + {p2} + {p3} + {p4} + {p5} = {sum(int(p) for p in [p1, p2, p3, p4, p5])}")
                                    raise Exception("finished!")

"""
3 + 7 + 109 + 673 = 792
3 + 7 + 109 + 29059 = 29178
3 + 7 + 109 + 79693 = 79812
3 + 7 + 109 + 91159 = 91278
3 + 7 + 109 + 93187 = 93306
3 + 7 + 229 + 76819 = 77058
3 + 7 + 541 + 4159 = 4710
3 + 7 + 541 + 74317 = 74868
3 + 7 + 541 + 83023 = 83574
3 + 7 + 673 + 22921 = 23604
3 + 7 + 673 + 65293 = 65976
3 + 7 + 823 + 27823 = 28656
3 + 11 + 701 + 8747 = 9462
3 + 11 + 701 + 53777 = 54492
3 + 11 + 2069 + 2297 = 4380
3 + 11 + 2069 + 8219 = 10302
3 + 11 + 2069 + 8747 = 10830
3 + 17 + 449 + 2069 = 2538
3 + 17 + 449 + 6353 = 6822
3 + 17 + 449 + 6599 = 7068
3 + 17 + 2069 + 2297 = 4386
3 + 31 + 1237 + 6571 = 7842
3 + 31 + 7591 + 8431 = 16056
3 + 37 + 67 + 2377 = 2484
3 + 37 + 67 + 5923 = 6030
3 + 37 + 67 + 194119 = 194226
3 + 37 + 1237 + 8713 = 9990
3 + 37 + 1699 + 8713 = 10452
3 + 37 + 2377 + 4159 = 6576
3 + 37 + 4729 + 7963 = 12732
3 + 37 + 5923 + 7963 = 13926
3 + 73 + 607 + 18523 = 19206
3 + 73 + 6793 + 7159 = 14028
3 + 191 + 2069 + 8747 = 11010
3 + 229 + 613 + 49177 = 50022
3 + 331 + 739 + 8431 = 9504
3 + 373 + 823 + 15559 = 16758
3 + 467 + 617 + 4253 = 5340
3 + 467 + 617 + 87623 = 88710
3 + 1237 + 6571 + 8713 = 16524
3 + 1699 + 6571 + 8713 = 16986
3 + 2503 + 5281 + 5869 = 13656
3 + 3923 + 4919 + 8783 = 17628
3 + 4729 + 7963 + 9181 = 21876
7 + 19 + 97 + 3727 = 3850
7 + 19 + 97 + 4507 = 4630
7 + 19 + 97 + 451177 = 451300
7 + 19 + 97 + 555091 = 555214
7 + 19 + 97 + 565813 = 565936
7 + 19 + 97 + 612037 = 612160
7 + 19 + 433 + 71143 = 71602
7 + 19 + 433 + 82219 = 82678
7 + 19 + 937 + 36871 = 37834
7 + 19 + 1249 + 3727 = 5002
7 + 19 + 3727 + 5659 = 9412
7 + 61 + 487 + 8941 = 9496
7 + 61 + 487 + 63601 = 64156
7 + 61 + 1693 + 3181 = 4942
7 + 109 + 673 + 20887 = 21676
7 + 109 + 673 + 34303 = 35092
7 + 109 + 883 + 13807 = 14806
7 + 127 + 6949 + 7723 = 14806
7 + 229 + 433 + 18433 = 19102
7 + 229 + 433 + 28729 = 29398
7 + 433 + 1471 + 3613 = 5524
7 + 433 + 3613 + 9613 = 13666
7 + 487 + 757 + 51061 = 52312
7 + 487 + 757 + 88651 = 89902
7 + 541 + 2467 + 8167 = 11182
7 + 547 + 853 + 27241 = 28648
7 + 757 + 829 + 92593 = 94186
7 + 829 + 2671 + 3361 = 6868
7 + 853 + 2269 + 8779 = 11908
7 + 853 + 8017 + 8779 = 17656
7 + 1237 + 1549 + 3019 = 5812
7 + 1249 + 3727 + 6949 = 11932
7 + 1249 + 4441 + 6949 = 12646
7 + 2089 + 2953 + 3181 = 8230
7 + 2089 + 3181 + 4219 = 9496
7 + 2269 + 3613 + 5821 = 11710
7 + 3019 + 7351 + 9613 = 19990
11 + 23 + 743 + 1871 = 2648
11 + 23 + 1871 + 8171 = 10076
11 + 23 + 1871 + 8681 = 10586
11 + 23 + 3083 + 8747 = 11864
11 + 23 + 5849 + 8681 = 14564
11 + 23 + 6329 + 7331 = 13694
11 + 239 + 1049 + 1847 = 3146
11 + 239 + 1091 + 1847 = 3188
11 + 239 + 3467 + 5807 = 9524
11 + 251 + 941 + 42863 = 44066
11 + 353 + 4967 + 5849 = 11180
11 + 353 + 4967 + 8219 = 13550
11 + 353 + 6791 + 8831 = 15986
11 + 701 + 7541 + 8747 = 17000
11 + 1103 + 5807 + 6329 = 13250
11 + 2297 + 4967 + 7127 = 14402
11 + 4013 + 4643 + 5153 = 13820
11 + 4547 + 6791 + 8831 = 20180
11 + 4643 + 5153 + 5849 = 15656
13 + 19 + 577 + 28219 = 28828
...
"""